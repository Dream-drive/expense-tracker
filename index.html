<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Expense & Time Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Google Charts API -->
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-light shadow-sm">
        <div class="container-fluid">
            <button class="btn btn-outline-dark" onclick="toggleSidebar()">☰</button>
            <a class="navbar-brand mx-auto" href="#">📊 Expense & Time Tracker</a>
        </div>
    </nav>

    <!-- Sidebar -->
<div id="sidebar">
    <a href="#">📌 Expenses</a>
    <a href="#">⏳ Time Tracking</a>
    <a href="#">⚙️ Manage</a>
    <a href="#">🔒 Set Limit</a>
    <a href="#">📊 Analytics</a>
    <a href="#" class="close" onclick="toggleSidebar()">❌ Close Sidebar</a>
</div>

    <!-- Main Content -->
    <div class="container mt-5">
        <!-- Welcome Section -->
<section class="container text-center my-5">
    <div class="card shadow-sm p-4 bg-light">
        <h2 class="fw-bold">Welcome to Expense Tracker</h2>
        <p class="lead">Easily manage your daily expenses, track spending trends, and stay on top of your budget.</p>
    
    </div>
</section>

<!-- Edit Expense Modal -->
<div class="modal fade" id="editExpenseModal" tabindex="-1" aria-labelledby="editExpenseModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editExpenseModalLabel">Edit Expense</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editExpenseForm">
                    <input type="hidden" id="editExpenseId">
                    <div class="mb-3">
                        <label for="editExpenseName" class="form-label">Expense Name</label>
                        <input type="text" class="form-control" id="editExpenseName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editExpenseAmount" class="form-label">Amount (GH₵)</label>
                        <input type="number" class="form-control" id="editExpenseAmount" required>
                    </div>
                    <div class="mb-3">
                        <label for="editExpenseCategory" class="form-label">Category</label>
                        <select class="form-control" id="editExpenseCategory">
                            <option value="Transport">Transport</option>
                            <option value="Food">Food</option>
                            <option value="Credit">Credit</option>
                            <option value="Others">Health</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Expense</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="expenseToast" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                ⚠️ Please enter valid expense details.
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>



        <!-- Expense Section -->
        <div id="expenses">
            <div class="card p-4 mb-4">
                <h4>➕ Add Expense</h4>

                <!-- Total Monthly Expenditure Display -->
                <div id="monthlyExpenditure" class="text-center"
                    style="background-color: gold; color: black; padding: 10px; border-radius: 8px;">
                    Total Monthly Expenditure: GH₵ <span id="monthlyTotal">0</span>
                </div>

                <form id="expenseForm">
                    <div class="mb-3">
                        <label for="expenseName" class="form-label">Name</label>
                        <input type="text" id="expenseName" class="form-control" placeholder="Enter expense name"
                            required>
                    </div>

                    <div class="mb-3">
                        <label for="expenseAmount" class="form-label">Amount (GH₵)</label>
                        <input type="number" id="expenseAmount" class="form-control" placeholder="Enter amount"
                            required>
                    </div>

                    <div class="mb-3">
                        <label for="expenseCurrency" class="form-label">Currency</label>
                        <select id="expenseCurrency" class="form-select">
                            <option value="USD">USD (US Dollar)</option>
                            <option value="EUR">EUR (Euro)</option>
                            <option value="GBP">GBP (British Pound)</option>
                            <option value="GHS" selected>GHS (Ghanaian Cedi)</option>
                            <option value="NGN">NGN (Nigerian Naira)</option>
                            <option value="CAD">CAD (Canadian Dollar)</option>
                            <option value="INR">INR (Indian Rupee)</option>
                            <option value="ZAR">ZAR (South African Rand)</option>
                            <option value="JPY">JPY (Japanese Yen)</option>
                            <option value="CNY">CNY (Chinese Yuan)</option> <!-- Added China -->
                        </select>
                        
                    </div>
                    

                    <div class="mb-3">
                        <label for="expenseCategory" class="form-label">Category</label>
                        <select id="expenseCategory" class="form-select" required>
                            <option value="">Select Category</option>
                            <option value="Food">Food</option>
                            <option value="Transport">Transport</option>
                            <option value="Health">Health</option>
                            <option value="Credit">Credit</option>
                        </select>
                    </div>

                    <button type="submit" class="btn w-100" style="background-color: #00008B; color: white;">
                        Add Expense
                    </button>
                </form>
            </div>
            <!-- Expense Logs -->
            <div id="expenseLog" class="mt-4">
                <h5>📋 Expense Entries</h5>
                <ul class="list-group"></ul>
            </div>
            <br><br>
            <!-- Expense Summary -->
            <div class="card p-4 mb-4">
                <h4>📊 Expense Summary</h4>
                <p><strong>Today:</strong> GH₵ <span id="todayTotal">0</span></p>
                <p><strong>This Week:</strong> GH₵ <span id="weekTotal">0</span></p>
                <p><strong>This Month:</strong> GH₵ <span id="monthTotal">0</span></p>

                <h5>📂 Monthly Breakdown (By Category)</h5>
                <ul id="categoryBreakdown" class="list-group mt-3"></ul>
            </div>

            <!-- Manage Section (CRUD) -->
            <div id="manage">
                <h4>🗂️ Manage Logs</h4>
                <ul id="manageLog" class="list-group mt-3"></ul>
            </div>
            

            <br><br><br>
        </div>


        
        <!-- Expense Limits Section -->
        <div id="expenseLimits">
            <h4>🔒 Set Expense Limits</h4>

            <!-- Budget Cap -->
            <div class="mb-3">
                <label for="monthlyLimit" class="form-label">Monthly Budget Cap (GH₵)</label>
                <input type="number" id="monthlyLimit" class="form-control" placeholder="Set monthly budget" min="0">
            </div>

            <!-- Category Limits -->
            <div class="mb-3">
                <label for="categoryLimits" class="form-label">Category-Specific Limits (GH₵)</label>
                <div id="categoryLimitInputs"></div>
            </div>

            <button class="btn btn-primary" onclick="saveLimits()">Save Limits</button>

            <!-- Warning Messages -->
            <div id="limitWarnings" class="mt-3"></div>
        </div>

        <div class="toast-container position-fixed top-0 end-0 p-3">
            <div id="expenseToast" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body"></div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        </div>
        
        <br><br><br>

        <!-- Recurring Expenses Section -->
<div id="recurringExpenses">
    <h4>🔄 Recurring Expenses</h4>

    <div class="mb-3">
        <label for="recurringName" class="form-label">Expense Name:</label>
        <input type="text" id="recurringName" class="form-control" placeholder="Enter expense name">
    </div>

    <div class="mb-3">
        <label for="recurringAmount" class="form-label">Amount (GH₵):</label>
        <input type="number" id="recurringAmount" class="form-control" placeholder="Enter amount" min="0">
    </div>

    <div class="mb-3">
        <label for="recurringCategory" class="form-label">Category:</label>
        <select id="recurringCategory" class="form-select">
            <option value="Food">Food</option>
            <option value="Transport">Transport</option>
            <option value="Rent">Health</option>
            <option value="Subscriptions">Credit</option>
            <option value="Other">Other</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="recurringFrequency" class="form-label">Repeat:</label>
        <select id="recurringFrequency" class="form-select">
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="recurringStartDate" class="form-label">Start Date:</label>
        <input type="date" id="recurringStartDate" class="form-control">
    </div>

    <button class="btn btn-primary" onclick="addRecurringExpense()">Add Recurring Expense</button>

    <h5 class="mt-4">📅 Scheduled Recurring Expenses:</h5>
    <ul id="recurringExpenseList" class="list-group mt-2"></ul>
</div>

<!-- Toast Notification -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
    <div id="expenseToast" class="toast align-items-center text-white bg-danger border-0" role="alert">
        <div class="d-flex">
            <div class="toast-body"></div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>

<!-- Edit Recurring Expense Modal -->
<div class="modal fade" id="editRecurringModal" tabindex="-1" aria-labelledby="editRecurringModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editRecurringModalLabel">Edit Recurring Expense</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editRecurringIndex">
        
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input type="text" id="editRecurringName" class="form-control">
        </div>
        
        <div class="mb-3">
          <label class="form-label">Amount (GH₵)</label>
          <input type="number" id="editRecurringAmount" class="form-control" min="0">
        </div>

        <div class="mb-3">
          <label class="form-label">Category</label>
          <select id="editRecurringCategory" class="form-control">
            <option>Food</option>
            <option>Transport</option>
            <option>Health</option>
            <option>Credit</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Frequency</label>
          <select id="editRecurringFrequency" class="form-control">
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Start Date</label>
          <input type="date" id="editRecurringStartDate" class="form-control">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="updateRecurringExpense()">Save Changes</button>
      </div>
    </div>
  </div>
</div>




        <br><br><br>

        <!-- Analytics Page -->
        <div id="analytics">

            <!-- Expense Analytics Section (Only in Expense Section) -->
            <div class="card p-4 mb-4">
                <h4>📊 Expense Analytics</h4>

                <!-- Responsive Pie Chart -->
                <div id="expensePieChart" class="chart-container"></div>

                <!-- Responsive Bar Chart -->
                <div id="expenseBarChart" class="chart-container"></div>
            </div>
        </div>

        <br><br><br>
        
        <!-- Time Tracking Section -->
        <div id="timeTracking" style="display: none;">
            <div class="card p-4 mb-4">
                <h4>⏳ Add Time Usage</h4>
                <form id="timeForm">
                    <div class="mb-3">
                        <label for="activity" class="form-label">Activity</label>
                        <input type="text" id="activity" class="form-control" placeholder="E.g., Study, Work" required>
                    </div>

                    <div class="mb-3">
                        <label for="duration" class="form-label">Duration (in hours or minutes)</label>
                        <input type="number" step="0.01" id="duration" class="form-control"
                            placeholder="E.g., 1.5 for 1h 30m" required>
                    </div>

                    <button type="submit" class="btn btn-primary w-100"
                        style="background-color: #00008B; color: white;">
                        Add Time Entry
                    </button>
                </form>
            </div>

            <!-- Time Tracking Logs -->
            <div id="timeLog" class="mt-4">
                <h5>⏳ Time Usage Entries</h5>
                <ul id="timeLogList" class="list-group"></ul>
            </div>
            <br><br><br>

            <!-- Time Summary -->
            <div class="card p-4 mb-4">
                <h4>⏳ Time Summary</h4>
                <p><strong>Today:</strong> <span id="timeToday">0</span> hrs</p>
                <p><strong>This Week:</strong> <span id="timeWeek">0</span> hrs</p>
                <p><strong>This Month:</strong> <span id="timeMonth">0</span> hrs</p>

                <h5>📂 Monthly Breakdown (By Activity)</h5>
                <ul id="activityBreakdown" class="list-group mt-3"></ul>
            </div>
            <br><br>

            <!-- Time Tracker Section -->
            <div class="container my-4">
                <h2 class="text-center">⏳ Time Tracker</h2>

                <!-- Time Tracking Form -->
                <div class="card p-4 mb-4 shadow-sm">
                    <h4>Start Activity</h4>
                    <label for="activityName" class="form-label">Activity Name:</label>
                    <input type="text" id="activityName" class="form-control mb-3" placeholder="Enter activity name">

                    <button class="btn btn-success w-100 mb-2" id="startBtn" onclick="startTracking()">▶ Start</button>
                    <button class="btn btn-warning w-100 mb-2" id="pauseBtn" onclick="pauseTracking()" disabled>⏸
                        Pause</button>
                    <button class="btn btn-info w-100 mb-2" id="resumeBtn" onclick="resumeTracking()" disabled>⏯
                        Resume</button>
                    <button class="btn btn-danger w-100" id="stopBtn" onclick="stopTracking()">⏹ Stop</button>

                    <!-- Timer Display -->
                    <div class="alert alert-info mt-3 text-center">
                        Current Time: <span id="timerDisplay">00:00:00</span>
                    </div>
                </div>

                <!-- Time Logs -->
                <div class="card p-4 shadow-sm">
                    <h4>📋 Time Logs</h4>
                    <ul id="timeLogList" class="list-group"></ul>
                </div>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script src="expense.js"></script>
    <script src="timeAuto.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>